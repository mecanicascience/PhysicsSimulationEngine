<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: drawer/objects/Text.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: drawer/objects/Text.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>class pSText {
    /**
    * @param text LaTeX code (insert '\text{TEXT}' for plain text)
    * @param pos text position (default (0, 0))
    * @param textSize text size multiplier (default 1)
    * @param color text color (default white)
    * @param showHitbox true : show text hitbox (default : false)
    */
    constructor(text, pos = new Vector(), textSize = 1, color = "#FFFFFF", showHitbox = false) {
        if(window.MathJax == undefined)
			console.error('You must import MathJax.js >=3.0.0 in order to use Text and Tex strings.');

        this.textSize   = textSize;
        this.color      = color;
        this.pos        = pos;
        this.showHitbox = showHitbox;

        this.setText(text);
    }

    /**
    * Draw the text to the screen
    * @param posOpt Force text position
    */
    draw(posOpt) {
        let drawer = _pSimulationInstance.plotter.drawer;

        let pos = drawer.plotter.computeForXYZ(this.pos.x, this.pos.y);
        if(posOpt != undefined)
            pos = drawer.plotter.computeForXYZ(posOpt.x, posOpt.y);


        push();
            translate(-this.svgImg.width / 2, -this.svgImg.height / 2);

            image(this.svgImg, pos.x, pos.y, this.svgImg.width, this.svgImg.height);

            if(this.showHitbox) {
                let h = this.svgImg.height;
                let w = this.svgImg.width;

                drawer
                    .stroke(this.color)
                    .strokeWeight(1)
                    .noFill();
                line(pos.x    , pos.y    , pos.x + w, pos.y    );
                line(pos.x    , pos.y + h, pos.x + w, pos.y + h);
                line(pos.x    , pos.y + h, pos.x    , pos.y    );
                line(pos.x + w, pos.y + h, pos.x + w, pos.y    );
            }
        pop();
    }

    /**
    * Change text value
    */
    setText(text) {
        this.text = text;

        let svg = '&lt;svg' + MathJax.tex2svg(this.text,
            { display : true, em : 12, ex : 6, containerWidth : 80 * 6, lineWidth : 100000, scale : 1 }
        ).innerHTML.split('&lt;svg')[1].split('&lt;/svg>')[0] + '&lt;/svg>';

        svg = svg
            .replace(/&lt;g/g           , '&lt;g color="' + this.color + '"')
            .replace(/width="(.*?)"/ , 'width="'  + parseFloat(/width="(.*?)"/ .exec(svg)[1].split('ex')[0]) * this.textSize + 'ex"')
            .replace(/height="(.*?)"/, 'height="' + parseFloat(/height="(.*?)"/.exec(svg)[1].split('ex')[0]) * this.textSize + 'ex"');

        this.svgImg = loadImage(URL.createObjectURL(new Blob([svg], { type: 'image/svg+xml' })));

        return this;
    }

    /**
    * Changes text position
    * @param x new X position
    * @param y new Y position
    */
    setPosition(x, y) {
        this.pos.x = x;
        this.pos.y = y;
        return this;
    }

    /**
    * Changes text color
    * @param color New color
    */
    setColor(color) {
        this.color = color;
        return this;
    }
}

export default pSText;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="pS3DDrawer.html">pS3DDrawer</a></li><li><a href="pSAnimationHandler.html">pSAnimationHandler</a></li><li><a href="pSDrawer.html">pSDrawer</a></li><li><a href="pSEaseInOutCubic.html">pSEaseInOutCubic</a></li><li><a href="pSInterpolation.html">pSInterpolation</a></li><li><a href="pSPlotter.html">pSPlotter</a></li><li><a href="pSPoint.html">pSPoint</a></li><li><a href="pSRecorder.html">pSRecorder</a></li><li><a href="pSText.html">pSText</a></li><li><a href="pSTriangle.html">pSTriangle</a></li><li><a href="Vector.html">Vector</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Wed Jun 23 2021 00:15:00 GMT+0200 (GMT+02:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
